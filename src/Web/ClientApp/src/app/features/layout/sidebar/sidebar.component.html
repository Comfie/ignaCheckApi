<!-- Premium Sidebar with Dark Mode Support -->
<aside class="fixed left-0 top-0 z-40 h-screen w-64 bg-gradient-to-b from-gray-900 to-gray-950 dark:from-gray-950 dark:to-black border-r border-gray-800 dark:border-gray-900 shadow-2xl transition-all duration-300">

  <!-- Logo Section -->
  <div class="flex items-center justify-center h-20 px-6 border-b border-gray-800 dark:border-gray-900 bg-gray-900/50 dark:bg-black/30">
    <a routerLink="/dashboard" class="flex items-center space-x-3 group">
      <div class="flex items-center gap-2">
        <!-- Logo Icon -->
        <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-105 transition-all duration-300">
          <span class="text-white font-bold text-xl">I</span>
        </div>
        <!-- Logo Text -->
        <div class="flex flex-col">
          <span class="text-white font-bold text-lg leading-tight group-hover:text-blue-400 transition-colors duration-200">IgnaCheck</span>
          <span class="text-gray-400 text-xs">Compliance Suite</span>
        </div>
      </div>
    </a>
  </div>

  <!-- Navigation Menu -->
  <nav class="flex-1 overflow-y-auto overflow-x-hidden px-3 py-4 scrollbar-thin">
    <ul class="space-y-1">

      <!-- Menu Items Loop -->
      <ng-container *ngFor="let item of menuItems">

        <!-- Section Divider / Title -->
        <li *ngIf="isDivider(item)" class="px-4 pt-6 pb-2">
          <h6 class="text-xs font-bold uppercase tracking-widest text-gray-500">Menu</h6>
        </li>

        <!-- Menu Item with Children (Dropdown) -->
        <li *ngIf="!isDivider(item) && hasChildren(item)" class="relative">
          <button
            (click)="toggleMenu(item.label!)"
            [class.bg-gray-800]="isActive(item)"
            [class.dark:bg-gray-900]="isActive(item)"
            class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 dark:hover:bg-gray-900 hover:text-white transition-all duration-200 hover:translate-x-1 group"
          >
            <!-- Active Indicator -->
            <span
              *ngIf="isActive(item)"
              class="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-gradient-to-b from-blue-500 to-purple-600 rounded-r shadow-lg shadow-blue-500/50"
            ></span>

            <!-- Icon -->
            <fa-icon
              [icon]="getIconForRoute(item.route)"
              class="text-lg flex-shrink-0 transition-all duration-200 group-hover:scale-110"
              [class.text-blue-400]="isActive(item)"
              [class.group-hover:text-blue-400]="!isActive(item)"
            ></fa-icon>

            <!-- Label -->
            <span
              class="flex-1 text-left text-sm font-medium"
              [class.text-white]="isActive(item)"
              [class.font-semibold]="isActive(item)"
            >
              {{ item.label }}
            </span>

            <!-- Badge -->
            <span
              *ngIf="item.badge"
              [class]="'px-2 py-0.5 text-xs font-semibold rounded-full ' + getBadgeClasses(item.badge.class)"
            >
              {{ item.badge.text }}
            </span>

            <!-- Chevron -->
            <fa-icon
              [icon]="faChevronDown"
              class="text-sm transition-transform duration-200"
              [class.rotate-180]="isExpanded(item.label!) || isActive(item)"
            ></fa-icon>
          </button>

          <!-- Submenu -->
          <ul
            *ngIf="isExpanded(item.label!) || isActive(item)"
            class="ml-4 mt-1 space-y-0.5 pl-6 border-l-2 border-gray-800 dark:border-gray-900 overflow-hidden animate-fade-in"
          >
            <li *ngFor="let child of item.children">
              <a
                [routerLink]="child.route"
                routerLinkActive="bg-blue-500/10 text-blue-400 font-semibold pl-5"
                [routerLinkActiveOptions]="{exact: false}"
                class="flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-800 dark:hover:bg-gray-900 hover:text-gray-200 hover:pl-5 transition-all duration-200 relative group"
              >
                <!-- Dot Indicator -->
                <fa-icon
                  [icon]="faCircle"
                  class="text-[6px] transition-all duration-200"
                  [class.text-blue-400]="isActive(child)"
                  [class.text-gray-600]="!isActive(child)"
                  [class.group-hover:text-blue-400]="!isActive(child)"
                ></fa-icon>

                {{ child.label }}

                <!-- Badge -->
                <span
                  *ngIf="child.badge"
                  [class]="'ml-auto px-2 py-0.5 text-xs font-semibold rounded-full ' + getBadgeClasses(child.badge.class)"
                >
                  {{ child.badge.text }}
                </span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Simple Menu Item (No Children) -->
        <li *ngIf="!isDivider(item) && !hasChildren(item)" class="relative">
          <a
            [routerLink]="item.route"
            routerLinkActive="bg-gray-800 dark:bg-gray-900 text-white font-semibold"
            [routerLinkActiveOptions]="{exact: false}"
            class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 dark:hover:bg-gray-900 hover:text-white transition-all duration-200 hover:translate-x-1 group"
          >
            <!-- Active Indicator -->
            <span
              routerLinkActive="opacity-100"
              class="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-gradient-to-b from-blue-500 to-purple-600 rounded-r shadow-lg shadow-blue-500/50 opacity-0 transition-opacity duration-200"
            ></span>

            <!-- Icon -->
            <fa-icon
              [icon]="getIconForRoute(item.route)"
              class="text-lg flex-shrink-0 transition-all duration-200 group-hover:scale-110"
              routerLinkActive="text-blue-400"
              [class.group-hover:text-blue-400]="!isActive(item)"
            ></fa-icon>

            <!-- Label -->
            <span class="flex-1 text-sm font-medium">
              {{ item.label }}
            </span>

            <!-- Badge -->
            <span
              *ngIf="item.badge"
              [class]="'px-2 py-0.5 text-xs font-semibold rounded-full ' + getBadgeClasses(item.badge.class)"
            >
              {{ item.badge.text }}
            </span>
          </a>
        </li>

      </ng-container>
    </ul>
  </nav>

  <!-- Footer / Version Info -->
  <div class="border-t border-gray-800 dark:border-gray-900 bg-gray-900/50 dark:bg-black/30 px-4 py-4">
    <div class="flex items-center justify-center gap-2 text-xs text-gray-500">
      <span>v1.0.0</span>
      <span>â€¢</span>
      <span>IgnaCheck</span>
    </div>
  </div>

</aside>
